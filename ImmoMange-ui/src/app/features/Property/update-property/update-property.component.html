<h3 mat-dialog-title class="property-title">Update Property</h3>
<mat-dialog-content class="mat-typography">
  <form [formGroup]="updatePropertyForm" class="update-property" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline">
      <mat-label>Address</mat-label>
      <input matInput formControlName="address">
      <mat-error *ngIf="updatePropertyForm.get('address')?.hasError('required') && updatePropertyForm.get('address')?.touched">
        Address is required.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description"></textarea>
      <mat-error *ngIf="updatePropertyForm.get('description')?.hasError('required') && updatePropertyForm.get('description')?.touched">
        Description is required.
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Rent Price</mat-label>
      <input matInput formControlName="rentPrice">
      <mat-error *ngIf="updatePropertyForm.get('rentPrice')?.hasError('required') && updatePropertyForm.get('rentPrice')?.touched">
        Rent Price is required.
      </mat-error>
      <mat-error *ngIf="updatePropertyForm.get('rentPrice')?.hasError('pattern') && updatePropertyForm.get('rentPrice')?.touched">
        Rent Price must be a valid number.
      </mat-error>
    </mat-form-field>

    <div formArrayName="propertyEquipmentsFormGroup">
      <div *ngFor="let equipment of propertyEquipmentsFormGroup.controls; let i = index">
        <mat-form-field appearance="outline">
          <mat-label>Equipment Name</mat-label>
          <input matInput [formControlName]="i">
          <button mat-icon-button color="warn" (click)="removeEquipment(i)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-form-field>
      </div>
      <button mat-button (click)="addEquipment()">Add Equipment</button>
    </div>

    <div formArrayName="propertyImageFormGroup">
      <div *ngFor="let image of propertyImageFormGroup.controls; let i = index">
        <mat-form-field appearance="outline">
          <mat-label>Image URL</mat-label>
          <input matInput [formControlName]="i">
          <button mat-icon-button color="warn" (click)="removeImage(i)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-form-field>
        <input type="file" (change)="onFileSelected($event, i)">
        <img *ngIf="imagePreviews[i]" [src]="imagePreviews[i]" alt="Image Preview">
      </div>
      <button mat-button (click)="addImage()">Add Image</button>
    </div>
    <div mat-dialog-actions align="end" class="action-buttons">
      <button mat-button mat-dialog-close>Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!updatePropertyForm.valid">Update</button>
    </div>
  </form>
</mat-dialog-content>
